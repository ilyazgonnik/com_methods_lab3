# SVD Image Compressor

Программа для сжатия монохромных BMP изображений с использованием сингулярного разложения (SVD) и теории малоранговых приближений.

## Алгоритм работы

1. **Сжатие**: Исходное изображение преобразуется в матрицу, над которой выполняется SVD-разложение. Сохраняются только первые `k` сингулярных чисел и соответствующих векторов.

2. **Восстановление**: Из промежуточного представления восстанавливается изображение путем умножения усеченных матриц: `U_k @ diag(s_k) @ Vt_k`.

## Формат промежуточного файла

Используется формат NPZ (сжатый numpy):
- `U`: левые сингулярные векторы (float16, shape: h × k)
- `s`: сингулярные значения (float16, shape: k)
- `Vt`: правые сингулярные векторы (float16, shape: k × w)
- `shape`: исходные размеры изображения

## Различия между SVD алгоритмами

### numpy.linalg.svd vs scipy.linalg.svd

#### Различия в реализации:
- **numpy.linalg.svd** использует LAPACK routine `gesdd` (divide-and-conquer algorithm)
- **scipy.linalg.svd** по умолчанию использует `gesdd`, но поддерживает выбор драйвера (`gesvd`, `gesdd`)

#### Метрика различий:
Для оценки различий используется метрика:
- Вектор `c`, где `c_j = max(a_j/b_j, b_j/a_j)` для упорядоченных сингулярных значений
- L2-норма вектора `c` показывает степень различия между алгоритмами
- на картинке special_image ошибка достигла бесконечности

## Использование

```python
# Сжатие с коэффициентами 2x, 4x, 8x
compress_image('input.bmp', ratios=[2, 4, 8])

# Восстановление изображения
decompress_image('compressed_2x.npz', 'restored_2x.bmp')
```